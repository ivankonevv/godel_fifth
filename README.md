# Godel 5 Тестовое задание

### .env файл должен содержать следующие значения:

- DB_USER - имя пользователя БД.
- DB_PASSWORD - пароль для пользователя.
- DB_NAME - название БД
- DB_HOST - хост БД. При запуске с помощью Docker - fifth_test_db
- DB_PORT - порт БД

###_Запуск:_
  `$ docker-compose up --build -d`

###_Swagger-документация:_
В процессе...

## Стек:

- Для реализации REST API был использован [Fiber]. 
  - Почему именно fiber? *_Выбрал его потому что делал несколько проектов с этим фреймворком + насколько мне известно - он лидирует в скорости среди аналогов._*
- В качестве БД используется [PostgreSQL]. 
  - Почему? - *_Была выбран из-за своей популярности._*
- Для работы с БД используется ORM [gorm]. Решил не писать запросы к бд прямо в коде. Так выглядит привлекательнее и приближённое к большим и качественным проектам. Да и мне просто нравится, когда нет "коктейля" в коде. 
- В качестве ID для постов был выбран [google/uuid]. 
  - Почему именно `uuid`, а не простой `int`? - *_Хороший вопрос, который я задал сам себе. - Решил поэкспериментировать, мне такой формат понравился._*
  - Почему именно эта библиотека? - *_Первое, что нашел._*
- Для валидации был выбран [go-playground/validator].
  - Почему? - *_С валидацией в Go до этого я дела не имел, это первое, что я вычитал на просторах необъятного интернета..._*

### Думаю, я ответил(или постарался) на основные вопросы. Теперь хочу сказать почему я делал не все усложнения.

- *Тесты*. Пару раз попытавшись, я потерпел неудачу. Совсем не приходилось с этим иметь дело. Думаю, это одно из первых, чем мне необходимо заняться.
- *Docker*. Проект в принципе использует докер, однако самого образа на docker-hub нет. Не знаю, засчитывается ли такой формат.
- *Описание архитектуры сервиса*. Не стал этим заниматься, потому что до этого не приходилось. Сделаю криво и будете всем коллективом смеяться(**_шутка_**).
- *Документация*. В процессе.

### Эндпоинты

- GET `http://localhost:3000/api/posts` - Получение списка всех постов
- GET `http://localhost:3000/api/posts/?sort_by=created_at desc, price` - Получение списка постов с сортировкой *(created_at, price (desc))*.
- GET `http://localhost:3000/api/posts/<uuid:id>` - Получение одного поста.
- GET `http://localhost:3000/api/posts/<uuid:id>/?fields=images, description` - Получение одного поста с дополнительными полями *(images, description)*.
- POST `http://localhost:3000/api/posts` - Создание нового поста.

### Пример JSON-тела для создания нового поста
```
{
    "title": "Some post title",
    "description": "Some post description",
    "price": 12345.8,
    "images": [
        {
            "image_url": "https://localhost:3000/image1"
        },
        {
            "image_url": "https://localhost:3000/image2"
        },
        {
            "image_url": "https://localhost:3000/image3"
        }
    ]
}
```

[fiber]: <https://gofiber.io>
[PostgreSQL]: <https://www.postgresql.org>
[gorm]: <https://gorm.io>
[google/uuid]: <https://github.com/google/uuid>
[go-playground/validator]: <https://github.com/go-playground/validator>

